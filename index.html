<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ú–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* –°—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
        body {
            background-color: #fff;
            color: #000;
            font-family: 'Montserrat', sans-serif;
            padding: 10px;
            padding-bottom: 80px;
        }
        .Menu_types {
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 12px 15px;
            margin: 10px auto;
            background-color: #fff;
            width: 100%;
            max-width: 300px;
            text-align: left;
            transition: background 0.2s ease;
            cursor: pointer;
        }
        .Menu_types:hover {
            background-color: #f9f9f9;
        }
        .Menu_types h3 {
            margin: 0 0 4px 0;
            font-size: 16px;
            font-weight: 600;
            color: #000;
        }
        .Menu_types .price {
            font-weight: 500;
            color: #FFCE00;
            font-size: 15px;
        }
        .cart-icon {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 44px;
            height: 44px;
            background-color: #000;
            border-radius: 6px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1001;
        }
        .cart-icon::before {
            content: "üõí";
            font-size: 20px;
            color: #fff;
        }
        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #FFCE00;
            color: #000;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #cart {
            display: none;
            position: fixed;
            top: 80px;
            right: 20px;
            width: 90%;
            max-width: 350px;
            background: #fff;
            border-radius: 8px;
            border: 1px solid #ddd;
            padding: 20px;
            z-index: 1000;
        }
        #cart h2 {
            font-size: 18px;
            font-weight: 600;
            text-align: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 0;
            font-size: 14px;
        }
        .remove-item {
            background: #000;
            color: #fff;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
        }
        .cart-total {
            text-align: right;
            padding-top: 15px;
            border-top: 1px solid #ddd;
            font-size: 16px;
            font-weight: 600;
        }
        #cart {
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        #cart.open {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        #total-price {
            color: #FFCE00;
        }
        #send-order {
            background: #FFCE00;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 600;
            margin-top: 15px;
            width: 100%;
            font-size: 15px;
            cursor: pointer;
        }
        #send-order:hover {
            background-color: #f5c700;
        }
        @media (max-width: 768px) {
            #wrapper {
                flex-direction: column;
            }
            .Menu_types {
                max-width: 100%;
            }
            #cart {
                width: calc(100% - 40px);
                right: 20px;
            }
        }
    </style>
</head>
<body>
<!-- –ó–Ω–∞—á–æ–∫ –∫–æ—Ä–∑–∏–Ω—ã —Å —Å—á–µ—Ç—á–∏–∫–æ–º -->
<div class="cart-icon" id="cart-icon">
    <div class="cart-count" id="cart-count">0</div>
</div>
<div id="wrapper" class="clearfix">
    <div id="lefters">
        <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –±–ª—é–¥–∞ -->
        <div class="Menu_types" data-name="–ö—É—Ä–∏—Ü–∞ –≥—Ä–∏–ª—å" data-price="350">
            <h3>–ö—É—Ä–∏—Ü–∞ –≥—Ä–∏–ª—å</h3>
            <p class="price">350 —Ä—É–±.</p>
        </div>
        <div class="Menu_types" data-name="–†–æ–ª–ª—ã –§–∏–ª–∞–¥–µ–ª—å—Ñ–∏—è" data-price="400">
            <h3>–†–æ–ª–ª—ã –§–∏–ª–∞–¥–µ–ª—å—Ñ–∏—è</h3>
            <p class="price">400 —Ä—É–±.</p>
        </div>
        <div class="Menu_types" data-name="–°—Ç–µ–π–∫ –∏–∑ –≥–æ–≤—è–¥–∏–Ω—ã" data-price="650">
            <h3>–°—Ç–µ–π–∫ –∏–∑ –≥–æ–≤—è–¥–∏–Ω—ã</h3>
            <p class="price">650 —Ä—É–±.</p>
        </div>
        <div class="Menu_types" data-name="–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä—å" data-price="320">
            <h3>–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä—å</h3>
            <p class="price">320 —Ä—É–±.</p>
        </div>
        <div class="Menu_types" data-name="–ë—É—Ä–≥–µ—Ä –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π" data-price="380">
            <h3>–ë—É—Ä–≥–µ—Ä –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π</h3>
            <p class="price">380 —Ä—É–±.</p>
        </div>
    </div>
    <div id="righters">
        <!-- –î—Ä—É–≥–∏–µ –±–ª—é–¥–∞ -->
        <div class="Menu_types" data-name="–°—É—à–∏ —Å –ª–æ—Å–æ—Å–µ–º" data-price="500">
            <h3>–°—É—à–∏ —Å –ª–æ—Å–æ—Å–µ–º</h3>
            <p class="price">500 —Ä—É–±.</p>
        </div>
        <div class="Menu_types" data-name="–ü–∞—Å—Ç–∞ –ö–∞—Ä–±–æ–Ω–∞—Ä–∞" data-price="450">
            <h3>–ü–∞—Å—Ç–∞ –ö–∞—Ä–±–æ–Ω–∞—Ä–∞</h3>
            <p class="price">450 —Ä—É–±.</p>
        </div>
        <div class="Menu_types" data-name="–ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞" data-price="480">
            <h3>–ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞</h3>
            <p class="price">480 —Ä—É–±.</p>
        </div>
        <div class="Menu_types" data-name="–°—É–ø –¢–æ–º –Ø–º" data-price="390">
            <h3>–°—É–ø –¢–æ–º –Ø–º</h3>
            <p class="price">390 —Ä—É–±.</p>
        </div>
        <div class="Menu_types" data-name="–î–µ—Å–µ—Ä—Ç –¢–∏—Ä–∞–º–∏—Å—É" data-price="280">
            <h3>–î–µ—Å–µ—Ä—Ç –¢–∏—Ä–∞–º–∏—Å—É</h3>
            <p class="price">280 —Ä—É–±.</p>
        </div>
    </div>
</div>
<!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
<div id="cart">
    <h2>–í–∞—à –∑–∞–∫–∞–∑</h2>
    <div class="cart-content">
        <ul id="cart-items"></ul>
        <div class="cart-total">
            <p>–ò—Ç–æ–≥–æ: <span id="total-price">0</span> —Ä—É–±.</p>
            <button id="send-order">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
    </div>
</div>
<script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
    const tg = window.Telegram?.WebApp;
    if (tg) {
        tg.expand(); // –†–∞—Å–∫—Ä—ã–≤–∞–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
        tg.enableClosingConfirmation(); // –í–∫–ª—é—á–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è
    }
    let cart = [];
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ 6-–∑–Ω–∞—á–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–∞
    function generateOrderNumber() {
        return Math.floor(100000 + Math.random() * 900000);
    }
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É
    function addToCart(productName, productPrice) {
        cart.push({ name: productName, price: parseInt(productPrice) });
        updateCart();
        // –í–∏–±—Ä–∞—Ü–∏—è –¥–ª—è feedback
        if (navigator.vibrate) navigator.vibrate(50);
    }
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã
    function updateCart() {
        const cartItems = document.getElementById('cart-items');
        const totalPriceElement = document.getElementById('total-price');
        const cartCount = document.getElementById('cart-count');
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ —Ç–æ–≤–∞—Ä–æ–≤
        cartCount.textContent = cart.length;
        cartCount.style.display = cart.length > 0 ? 'flex' : 'none';
        // –û—á–∏—â–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ—Ä–∑–∏–Ω—ã
        cartItems.innerHTML = '';
        let totalPrice = 0;
        if (cart.length === 0) {
            const li = document.createElement('li');
            li.textContent = '–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞';
            li.style.textAlign = 'center';
            li.style.padding = '20px';
            li.style.color = '#666';
            cartItems.appendChild(li);
        } else {
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞–∂–¥—ã–π –ø—Ä–æ–¥—É–∫—Ç –≤ –∫–æ—Ä–∑–∏–Ω—É —Å –∫–Ω–æ–ø–∫–æ–π —É–¥–∞–ª–µ–Ω–∏—è
            cart.forEach((item, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <div class="cart-item">
                        <span class="item-name">${item.name}</span>
                        <span class="item-price">${item.price} —Ä—É–±.</span>
                        <button class="remove-item" data-index="${index}">√ó</button>
                    </div>
                `;
                cartItems.appendChild(li);
                totalPrice += item.price;
            });
        }
        // –û–±–Ω–æ–≤–ª—è–µ–º –∏—Ç–æ–≥–æ–≤—É—é —Ü–µ–Ω—É
        totalPriceElement.textContent = totalPrice;
    }
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
    function removeItem(index) {
        cart.splice(index, 1);
        updateCart();
        if (navigator.vibrate) navigator.vibrate(50);
    }
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞
    function sendOrder() {
    if (cart.length === 0) {
        alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!");
        return;
    }
    const orderNumber = generateOrderNumber(); // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞
    if (tg && typeof tg.sendData === 'function') {
        try {
            // –ï—Å–ª–∏ –≤ Telegram - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ WebApp
            const orderData = {
                items: cart,
                total: cart.reduce((sum, item) => sum + item.price, 0),
                orderNumber: orderNumber,
                timestamp: new Date().toISOString()
            };
            tg.sendData(JSON.stringify(orderData));

            // –î–∞–µ–º –Ω–µ–±–æ–ª—å—à—É—é –ø–∞—É–∑—É, —á—Ç–æ–±—ã –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è
            setTimeout(() => {
                cart = []; // –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
                updateCart();
                tg.close();
            }, 500); // –ü–æ–ª—Å–µ–∫—É–Ω–¥—ã –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
        } catch (error) {
            console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ WebApp:", error);
            alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
        }
    } else {
        // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞
        const fullName = prompt("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ –§–∞–º–∏–ª–∏—é –∏ –ò–º—è:");
        if (!fullName) {
            alert("–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞.");
            return;
        }
        sendOrderToTelegram(fullName, orderNumber);
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–æ–º–µ—Ä –µ–≥–æ –∑–∞–∫–∞–∑–∞
        alert(`–í–∞—à –∑–∞–∫–∞–∑ ‚Ññ${orderNumber} —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω!`);
        cart = [];
        updateCart();
    }
}

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞ –≤ Telegram (–¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞)
    async function sendOrderToTelegram(fullName, orderNumber) {
        let message = `–ù–æ–≤—ã–π –∑–∞–∫–∞–∑ #${orderNumber} –æ—Ç ${fullName}:\n`;
        let totalPrice = 0;

        cart.forEach(item => {
            message += `‚Ä¢ ${item.name} - ${item.price} —Ä—É–±.\n`;
            totalPrice += item.price;
        });

        message += `\n–ò—Ç–æ–≥–æ: ${totalPrice} —Ä—É–±.\n–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: ${orderNumber}`;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è
        if (message.length > 4096) {
            console.error("–°–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ –¥–ª—è Telegram API.");
            alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ.");
            return;
        }

        const BOT_TOKEN = "7735670314:AAEF2F3-bivoSccOjH-8JQvDsYugYJUMzWQ"; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω
        const CHAT_ID = 1205843084; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à chat_id

        try {
            const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: CHAT_ID,
                    text: message,
                }),
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            if (!data.ok) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞ –≤ Telegram:", data);
                alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞:', error);
            alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞.");
        }
    }
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    document.querySelectorAll('.Menu_types').forEach(item => {
        item.addEventListener('click', (e) => {
            e.preventDefault();
            const productName = item.getAttribute('data-name');
            const productPrice = item.getAttribute('data-price');
            addToCart(productName, productPrice);
            // –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞–∂–∞—Ç–∏—è
            item.style.transform = 'scale(0.95)';
            setTimeout(() => {
                item.style.transform = 'scale(1)';
            }, 100);
        });
    });
    document.getElementById('send-order').addEventListener('click', (e) => {
        e.preventDefault();
        sendOrder();
    });
    // –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–æ—Ä–∑–∏–Ω—ã –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∑–Ω–∞—á–æ–∫
    document.getElementById('cart-icon').addEventListener('click', (e) => {
        e.preventDefault();
        const cartDiv = document.getElementById('cart');
        cartDiv.classList.toggle('open');
    });
    // –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã (–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π)
    document.addEventListener('click', (e) => {
        if (e.target.classList.contains('remove-item')) {
            e.preventDefault();
            const index = parseInt(e.target.getAttribute('data-index'));
            removeItem(index);
        }
    });
</script>
</body>
</html>
